{{ $pathStyles := printf "static/%s/" $.Params.id }}
{{ $pathImages := printf "static/%s/images/" $.Params.id }}
{{ $urlStatic := trim (printf "%s/%s" (trim $.Site.BaseURL "/") $.Params.id) "/" }}
{{ $urlImages := printf "%s/images" $urlStatic }}

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="{{ .Description }}">
	<meta name="author" content="{{ $.Title }}">
	<title>{{ $.Title }}</title>

	<link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

	<link href="{{ trim $.Site.BaseURL "/" }}/asset/style-skeleton.css" rel="stylesheet" type="text/css">
	{{ $styles := (readDir $pathStyles) }}
	{{ range $styles }}
		{{ $ext := (substr .Name (sub (len .Name) 4)) }}
		{{ if (eq $ext ".css") }}
			<link href="{{ printf "%s/%s" $urlStatic .Name }}" rel="stylesheet" type="text/css">
		{{ end }}
	{{ end }}

	<link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css">

</head>
<body>

	<div class="container">
		<header>
			<h1 class="sixteen columns">{{ $.Title }}</h1>
		</header>
		<div id="menu" class="four columns" style="top: 79px;">
			<ul>
				<li><a href="#factsheet">Factsheet</a></li>
				<li><a href="#description">Description</a></li>
				<li><a href="#history">History</a></li>
				<li><a href="#projects">Projects</a></li>
				<li><a href="#trailers">Videos</a></li>
				<li><a href="#images">Images</a></li>
				<li><a href="#logo">Logo &amp; Icon</a></li>
				<li><a href="#credits">Team</a></li>
				<li><a href="#contact">Contact</a></li></ul>
			</ul>
		</div>		
		<div id="dummy-menu" class="four columns">&nbsp;</div>
		<div id="factsheet" class="four columns">
			<h2>Factsheet</h2>
			<dl>
				<dt>Developer</dt>
				<dd><a href="{{ $.Params.website.link }}">{{ $.Params.title }}</a></dd>
				<dd>Based in {{ $.Params.basedin }}</dd>
				<dt>Founding Date:</dt>
				<dd>{{ $.Params.foundingdate }}</dd>
				<dt>Website:</dt>
				<dd><a href="{{ $.Params.website.link }}">{{ $.Params.website.name }}</a></dd>
				<dt>Press / Business contact:</dt>
				<dd><a href="mailto:{{ $.Params.pressContact }}">{{ $.Params.pressContact }}</a></dd>
				{{ if (gt $.Params.social 0 ) }}
					<dt>Social:</dt>
					{{ range $.Params.social }}
						<dd><a href="{{ .link }}">{{ .name }}</a></dd>
					{{ end }}
				{{ end }}
				{{ if (gt $.Params.releases 0 ) }}
					<dt>Releases:</dt>
					{{ range $.Params.releases }}
						<dd><a href="{{ relref $.Page . }}">{{ ($.Site.GetPage "page" .).Title }}</a></dd>
					{{ end }}
				{{ end }}
			</dl>
		</div>
		<div id="historydescription" class="eight columns alpha omega">

				<div id="dh" class="eight columns">
					{{ .Content }}
				</div>
				<div id="games" class="eight columns">
					{{ if (gt $.Params.releases 0 ) }}
						<h2>Projects</h2>
						<ul>
						{{ range $release := $.Params.releases }}
							{{ $project := $.Site.GetPage "page" . }}
							{{ $purlStatic := trim (printf "%s/%s" (trim $.Site.BaseURL "/") $project.Params.id) "/" }}
							{{ $purlImages := printf "%s/images" $purlStatic }}
							{{ $ppathImages := printf "static/%s/images/" $project.Params.id }}
							{{ $pimages := readDir $ppathImages }}
							{{ range first 1 $pimages }}
								<li><a href="{{ relref $.Page $release }}" class="four columns alpha" style="background-image: url({{ printf "%s/%s" $purlImages .Name }});">{{ $project.Title }}</a></li>
							{{ end }}
						{{ end }}
						</ul>
					{{ end }}
				</div>
		</div>
		<hr class="twelve columns">

		<div id="trailers" class="twelve columns">
			<h2>Videos</h2>
			{{ partial "videos.html" . }}
		</div>

		<div id="images" class="twelve columns">
			<h2>Images</h2>
			{{ partial "images.html" . }}
		</div>

		<hr class="twelve columns">

		<div id="logos" class="twelve columns">
			<h2>Logo &amp; Icon</h2>
			{{ partial "logos.html" . }}
		</div>

		<hr class="twelve columns">
	</div>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
	<script>
		// by Martin Jonasson (http://grapefrukt.com/)
		$(document).ready(function(){
			// makes menu stick to top of screen
			var dummymenu = $('#dummy-menu');
			var menu = $('#menu');

			var updateMenu = function() {
				var menutop = dummymenu.offset().top - 10;
				var scrolltop = $(window).scrollTop();
				if(scrolltop < menutop && menu.css('position') == 'fixed' ){
					menu.css('top', menutop - Math.max(scrolltop, 0));
				} else {
					menu.css('top', 0);
				}
			};

			$.event.add(window, 'scroll', updateMenu);
			$.event.add(window, 'resize', updateMenu);
			updateMenu();

			// resizes videos/images to stay in widescreen aspect ratio
			var updateVideoSize = function(){
				$('.widescreen').each(function() {
					$(this).css('height', $(this).width() * .5625);
				});
			}

			$.event.add(window, 'resize', updateVideoSize);
			updateVideoSize();
		});
	</script>
</body>
</html>

<!--
						
						<div class="row">
							<div class="col-12 col-sm-6">
								<h2 id="credits">Members</h2>
								{{ range $.Params.team }}
								<p>
									<strong>{{ .person }}{{ if .mail }} (<a href="mailto:{{ .mail }}">Email</a>){{ end }}</strong><br/>
									{{ .role }}
								</p>
								{{ end }}
							</div>
							<div class="col-12 col-sm-6">
								<h2 id="contact">Contact</h2>
								{{ partial "contacts.html" . }}
							</div>
						</div>

						<hr>

						<p>{{ partial "footer.html" . }}</p>
					</div>
				</div>
			</div>
		</div>
 
		<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
		<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/3.0.4/jquery.imagesloaded.js"></script>
		<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/masonry/3.1.2/masonry.pkgd.min.js"></script>
		<script type="text/javascript">
			$( document ).ready(function() {
				var container = $('.images');

				container.imagesLoaded( function() {
					container.masonry({
						itemSelector: '.image',
					});
				});
			});
		</script>	</body>
</html>
	-->